(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(39)},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),u=n.n(c),o=n(16),l=n(2),i=function(e){var t=e.persons,n=e.handleDeleteClick;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return n(e.id)}},"Delete"))})))},m=function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"Name: "),r.a.createElement("input",{type:"text",value:e.nameValue,onChange:e.handleNameChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"number"},"Phone Number: "),r.a.createElement("input",{tpye:"text",value:e.numberValue,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",null,"Add")))},d=function(e){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"filterBar"},"Filter by Name"),r.a.createElement("input",{value:e.value,onChange:e.handleChange}))},h=function(e){var t=e.message,n=t.type,a=t.text;return r.a.createElement("p",{style:"error"===n?{color:"red",backgroundColor:"#ed8e8e",border:"1px solid red",fontSize:"2rem",width:"fit-content"}:{color:"green",backgroundColor:"#eaffc2",border:"1px solid green",fontSize:"2rem",width:"fit-content"}},a)},f=n(4),s=n.n(f),b="api/persons",p=function(){return s.a.get(b).then((function(e){return e.data}))},E=function(e){return s.a.post(b,e).then((function(e){return e.data}))},g=function(e){return s.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},v=function(e,t){return s.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},y=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),f=Object(l.a)(u,2),s=f[0],b=f[1],y=Object(a.useState)(""),C=Object(l.a)(y,2),k=C[0],j=C[1],w=Object(a.useState)(""),x=Object(l.a)(w,2),O=x[0],N=x[1],S=Object(a.useState)(null),D=Object(l.a)(S,2),F=D[0],V=D[1],A=function(){return setTimeout((function(){return V(null)}),5e3)},z=""===O?n:n.filter((function(e){return e.name.includes(O)}));return Object(a.useEffect)((function(){return p().then((function(e){return c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(d,{value:O,handleChange:function(e){return N(e.target.value)}}),r.a.createElement("h2",null,"Add a new contact"),F&&r.a.createElement(h,{message:F}),r.a.createElement(m,{nameValue:s,numberValue:k,handleNameChange:function(e){return b(e.target.value)},handleNumberChange:function(e){return j(e.target.value)},handleSubmit:function(e){e.preventDefault();var t={name:s.trim(),number:k.trim()},a=n.find((function(e){return e.name===s}));if(a)window.confirm("".concat(s," already exists in the phonebook. Do you want to replace the number?"))&&v(a.id,t).then((function(e){V({type:"success",text:"Number for ".concat(s," has been changed to ").concat(k,".")}),A()})).catch((function(e){V({type:"error",text:"Couldn't change number for ".concat(s,".")}),A()})).then((function(e){return p().then((function(e){return c(e)}))}));else{Object(o.a)(n);E(t).then((function(e){V({type:"success",text:"".concat(s," has been added to the phone book with number ").concat(k,".")}),A()})).catch((function(e){V({type:"error",text:"".concat(s," couldn't be added to the database. Message: ").concat(e)}),A()})).then((function(e){return p().then((function(e){return c(e)}))}))}b(""),j("")}}),r.a.createElement("h2",null,"Numbers"),0===Object.keys(z).length?r.a.createElement("p",null,"No contacts to show."):r.a.createElement(i,{persons:z,handleDeleteClick:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&(g(t.id).then((function(e){V({type:"success",text:"".concat(t.name," has been deleted.")}),A()})).catch((function(e){V({type:"error",text:"".concat(t.name," is already deleted from the database")}),A()})),c(n.filter((function(t){return t.id!==e}))))}}))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.6a0ad8f0.chunk.js.map