(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),u=n(2),l=function(e){var t=e.persons,n=e.handleDeleteClick;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return n(e.id)}},"Delete"))})))},i=function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"Name: "),r.a.createElement("input",{type:"text",value:e.nameValue,onChange:e.handleNameChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"number"},"Phone Number: "),r.a.createElement("input",{tpye:"text",value:e.numberValue,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",null,"Add")))},m=function(e){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"filterBar"},"Filter by Name"),r.a.createElement("input",{value:e.value,onChange:e.handleChange}))},d=function(e){var t=e.message,n=t.type,a=t.text;return r.a.createElement("p",{style:"error"===n?{color:"red",backgroundColor:"#ed8e8e",border:"1px solid red",fontSize:"2rem",width:"fit-content"}:{color:"green",backgroundColor:"#eaffc2",border:"1px solid green",fontSize:"2rem",width:"fit-content"}},a)},h=n(3),f=n.n(h),s="api/persons",b=function(){return f.a.get(s).then((function(e){return e.data}))},p=function(e){return f.a.post(s,e).then((function(e){return e.data}))},E=function(e){return f.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},g=function(e,t){return f.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},v=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),h=Object(u.a)(o,2),f=h[0],s=h[1],v=Object(a.useState)(""),y=Object(u.a)(v,2),C=y[0],k=y[1],w=Object(a.useState)(""),x=Object(u.a)(w,2),j=x[0],O=x[1],N=Object(a.useState)(null),S=Object(u.a)(N,2),D=S[0],F=S[1],V=function(){return setTimeout((function(){return F(null)}),5e3)},A=""===j?n:n.filter((function(e){return e.name.includes(j)}));return Object(a.useEffect)((function(){return b().then((function(e){return c(e)})).catch((function(e){return c([])}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(m,{value:j,handleChange:function(e){return O(e.target.value)}}),r.a.createElement("h2",null,"Add a new contact"),D&&r.a.createElement(d,{message:D}),r.a.createElement(i,{nameValue:f,numberValue:C,handleNameChange:function(e){return s(e.target.value)},handleNumberChange:function(e){return k(e.target.value)},handleSubmit:function(e){e.preventDefault();var t,n={name:f.trim(),number:C.trim()};b().then((function(e){(t=e.find((function(e){return e.name===f})))?window.confirm("".concat(f," already exists in the phonebook. Do you want to replace the number?"))&&g(t.id,n).then((function(e){F({type:"success",text:"Number for ".concat(f," has been changed to ").concat(C,".")}),V()})).catch((function(e){F({type:"error",text:"Couldn't change number for ".concat(f,". Message: ").concat(e.response.data.error)}),V()})).then((function(e){return b().then((function(e){return c(e)}))})):p(n).then((function(e){F({type:"success",text:"".concat(f," has been added to the phone book with number ").concat(C,".")}),V()})).catch((function(e){F({type:"error",text:"".concat(f," couldn't be added to the database. Message: ").concat(e.response.data.error)}),V()})).then((function(e){return b().then((function(e){return c(e)}))}))})),s(""),k("")}}),r.a.createElement("h2",null,"Numbers"),0===Object.keys(A).length?r.a.createElement("p",null,"No contacts to show."):r.a.createElement(l,{persons:A,handleDeleteClick:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&(E(t.id).then((function(e){F({type:"success",text:"".concat(t.name," has been deleted.")}),V()})).catch((function(e){F({type:"error",text:"".concat(t.name," is already deleted from the database")}),V()})),c(n.filter((function(t){return t.id!==e}))))}}))};o.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.4237b3e5.chunk.js.map